<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Mon Carnet Mobile + BLE (C3)</title>
  <meta name="theme-color" content="#0ea5e9">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <style>
    :root { --accent:#0ea5e9; --bg:#0b1020; --card:#111a2b; --text:#eef2ff; --muted:#9aa6b2; }
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto; background:var(--bg); color:var(--text)}
    header{position:sticky;top:0;background:linear-gradient(180deg,#0b1020,#0b1020cc 60%,transparent);backdrop-filter:blur(6px);padding:16px 16px 8px}
    h1{margin:0;font-size:22px} .sub{font-size:12px;color:var(--muted)}
    main{padding:16px;max-width:760px;margin:0 auto}
    .card{background:var(--card);border:1px solid #1c2943;border-radius:16px; padding:14px; box-shadow:0 6px 24px #0006; margin-bottom:16px}
    label{display:block;font-size:13px;color:var(--muted);margin:8px 0 6px}
    input, textarea, select, button{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #293751;background:#0f172a;color:var(--text);font-size:15px}
    input[readonly]{opacity:.9}
    button{background:var(--accent);border:0;color:white;font-weight:600}
    button.ghost{background:#13213b} button.warn{background:#e11d48}
    .row{display:grid;gap:12px} @media(min-width:560px){.row{grid-template-columns:1fr 1fr 1fr}}
    .list{display:grid;gap:12px} .item{display:grid;grid-template-columns:1fr;gap:6px}
    .actions{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
    .hint{font-size:12px;color:var(--muted)}
    .footer{opacity:.8;font-size:12px;text-align:center;margin-top:16px}
    .badge{display:inline-block;background:#13213b;border:1px solid #1f2b48;border-radius:999px;padding:4px 10px;font-size:12px;color:#c7d2fe}
  </style>
</head>
<body>
  <header>
    <h1>Mon Carnet Mobile</h1>
    <div class="sub">BLE filtré sur ESP32C3-Mesures – PWA installable</div>
  </header>
  <main>
    <section class="card">
      <div class="badge">Bluetooth (ESP32C3-Mesures)</div>
      <div class="actions">
        <button id="bleConnectBtn">Connecter</button>
        <button id="bleReadBtn" class="ghost">Lire maintenant</button>
        <div id="bleStatus" class="hint">Statut : non connecté</div>
      </div>
      <div class="hint">Ouvre l’app via HTTPS ou http://localhost pour que le Bluetooth fonctionne.</div>
    </section>

    <section class="card">
      <div class="badge">Nouvelle entrée</div>
      <div class="row">
        <div>
          <label for="title">Titre</label>
          <input id="title" placeholder="Ex. Relevé BLE" autocomplete="off" />
        </div>
        <div>
          <label for="voltage">Tension batterie (V)</label>
          <input id="voltage" readonly />
        </div>
        <div>
          <label for="mm">Mesure (mm)</label>
          <input id="mm" readonly />
        </div>
      </div>
      <div class="actions">
        <button id="saveBtn">Enregistrer</button>
        <button id="clearBtn" class="ghost">Tout effacer</button>
      </div>
    </section>

    <section class="card">
      <div class="badge">Entrées sauvegardées</div>
      <div id="list" class="list"></div>
      <div class="actions">
        <button id="exportBtn" class="ghost">Exporter (JSON)</button>
      </div>
    </section>

    <section class="footer">v1.0 C3 BLE • Vos données restent sur l'appareil</section>
  </main>

  <script src="app.js"></script>
</body>
</html>
